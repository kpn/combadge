# Version 5

## Service protocols

`SupportsService` class is **removed**. Inherit protocol classes normally from the standard [`#!python Protocol`](https://docs.python.org/3/library/typing.html#typing.Protocol). Instead of `SupportsService.bind()`, use the [service container][combadge.core.container.ServiceContainerMixin].

## Response markers

**Response markers are gone.** Instead, post-processing of responses is delegated to [response models][response-validation]:

- For non-annotated response models, wrap them with [`Body`][combadge.support.common.response.Body].
- For response markers, use Pydantic's `Field` with `Annotated` and specify the respective `validation_alias`. For example:
  ```python
  class HeaderResponse(BaseModel):
      custom_header: Annotated[
          str,
          Field(validation_alias=AliasPath("http", "headers", "X-Custom")),
      ]
  ```

## Binding

`combadge.core.binder.bind()` function is **removed**. For binding, use the [service container][combadge.core.container.ServiceContainerMixin].

## Service instances

`BaseBoundService` no longer supports the context manager protocol, as the same backend may potentially be shared by other service instances. Use `with` or `async with` with the backend instance instead.
